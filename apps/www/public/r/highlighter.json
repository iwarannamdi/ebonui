{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "highlighter",
  "type": "registry:ui",
  "title": "Highlighter",
  "description": "A text highlighter that mimics the effect of a human-drawn marker stroke.",
  "dependencies": [
    "rough-notation"
  ],
  "files": [
    {
      "path": "registry/ebonui/highlighter.tsx",
      "content": "\"use client\"\n\nimport { useEffect, useMemo, useRef } from \"react\"\nimport type React from \"react\"\nimport { useInView } from \"motion/react\"\nimport { annotate } from \"rough-notation\"\nimport type { RoughAnnotation } from \"rough-notation/lib/model\"\n\ntype AnnotationAction =\n  | \"highlight\"\n  | \"underline\"\n  | \"box\"\n  | \"circle\"\n  | \"strike-through\"\n  | \"crossed-off\"\n  | \"bracket\"\n\ninterface HighlighterProps {\n  children: React.ReactNode\n  action?: AnnotationAction\n  color?: string\n  strokeWidth?: number\n  animationDuration?: number\n  iterations?: number\n  padding?: number\n  multiline?: boolean\n  isView?: boolean\n}\n\nexport function Highlighter({\n  children,\n  action = \"highlight\",\n  color = \"#ffd1dc\",\n  strokeWidth = 1.5,\n  animationDuration = 600,\n  iterations = 2,\n  padding = 2,\n  multiline = true,\n  isView = false,\n}: HighlighterProps) {\n  const elementRef = useRef<HTMLSpanElement>(null)\n  const annotationRef = useRef<RoughAnnotation | null>(null)\n\n  // Detect when text enters the viewport\n  const isInView = useInView(elementRef, {\n    once: true,\n    margin: \"-10%\",\n  })\n\n  const shouldShow = !isView || isInView\n\n  // Memoized annotation configuration\n  const annotationConfig = useMemo(\n    () => ({\n      type: action,\n      color,\n      strokeWidth,\n      animationDuration,\n      iterations,\n      padding,\n      multiline,\n    }),\n    [\n      action,\n      color,\n      strokeWidth,\n      animationDuration,\n      iterations,\n      padding,\n      multiline,\n    ]\n  )\n\n  useEffect(() => {\n    const el = elementRef.current\n    if (!el || !shouldShow) return\n\n    // Prevent creating multiple annotation objects\n    if (!annotationRef.current) {\n      annotationRef.current = annotate(el, annotationConfig)\n    }\n\n    const annotation = annotationRef.current\n    annotation.show()\n\n    // Resize observer to reposition annotation when size changes\n    const resizeObserver = new ResizeObserver(() => {\n      annotation.hide()\n      annotation.show()\n    })\n\n    resizeObserver.observe(el)\n\n    return () => {\n      resizeObserver.disconnect()\n      annotation.remove()\n      annotationRef.current = null\n    }\n  }, [shouldShow, annotationConfig])\n\n  return (\n    <span ref={elementRef} className=\"relative inline-block bg-transparent\">\n      {children}\n    </span>\n  )\n}\n",
      "type": "registry:ui"
    }
  ]
}